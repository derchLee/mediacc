# MediaCC - æœ¬åœ°åª’ä½“è½¬æ¢ä¸å‹ç¼©å·¥å…·

ä¸€ä¸ªéšç§å®‰å…¨ã€é›¶æœåŠ¡ç«¯æˆæœ¬çš„å¤šåª’ä½“å¤„ç†å·¥å…·ã€‚æ‰€æœ‰å¤„ç†é€»è¾‘åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­å®Œæˆï¼Œç¡®ä¿ç”¨æˆ·æ•°æ®å®Œå…¨æœ¬åœ°åŒ–å¤„ç†ï¼Œç»ä¸æµå‘åç«¯æœåŠ¡å™¨ã€‚

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### å›¾ç‰‡å¤„ç†
- **æ ¼å¼è½¬æ¢**: æ”¯æŒ JPG, PNG, WebP, AVIF äº’è½¬
- **è´¨é‡å‹ç¼©**: å¯è°ƒèŠ‚å‹ç¼©è´¨é‡
- **ç­‰æ¯”ç¼©æ”¾**: ä¿æŒåŸå§‹æ¯”ä¾‹è¿›è¡Œç¼©æ”¾
- **å®æ—¶å¯¹æ¯”é¢„è§ˆ**: Before/After å¯¹æ¯”åŠŸèƒ½

### è§†é¢‘å¤„ç†
- **æ ¼å¼è½¬æ¢**: æ”¯æŒ MP4, WebM, MOV äº’è½¬
- **ç ç‡/å¸§ç‡è°ƒæ•´**: è‡ªå®šä¹‰è§†é¢‘å‚æ•°
- **è§†é¢‘æŠ½å¸§**: ä»è§†é¢‘ä¸­æå–é™æ€å›¾ç‰‡
- **éŸ³é¢‘æå–**: æå–è§†é¢‘éŸ³é¢‘å¹¶è½¬æ¢ä¸º MP3
- **ä¸€é”®é™éŸ³**: å¿«é€Ÿç§»é™¤è§†é¢‘éŸ³è½¨

### ç”¨æˆ·ä½“éªŒ
- **æ‰¹é‡å¤„ç†**: æ”¯æŒæ–‡ä»¶é˜Ÿåˆ—æ‰¹é‡å¤„ç†
- **ç¦»çº¿å¯ç”¨**: PWA æ”¯æŒï¼Œç¦»çº¿ä¹Ÿèƒ½ä½¿ç”¨
- **è¿›åº¦æç¤º**: å¤§æ–‡ä»¶å¤„ç†æ—¶æ˜¾ç¤ºè¿›åº¦æ¡
- **100% æœ¬åœ°å¤„ç†**: æ‰€æœ‰æ•°æ®ä»…åœ¨æµè§ˆå™¨ä¸­å¤„ç†ï¼Œä¸ä¸Šä¼ æœåŠ¡å™¨

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Next.js 14 (App Router)
- **è¯­è¨€**: TypeScript
- **æ ·å¼**: Tailwind CSS
- **è§†é¢‘å¤„ç†**: ffmpeg.wasm
- **å›¾ç‰‡å¤„ç†**: Canvas API / Photon (WASM)
- **å›¾æ ‡**: Lucide React
- **çŠ¶æ€ç®¡ç†**: Zustand

## ğŸ“¦ å®‰è£…ä¸è¿è¡Œ

### ç¯å¢ƒè¦æ±‚
- Node.js 18+ 
- npm æˆ– yarn æˆ– pnpm

### å®‰è£…ä¾èµ–
```bash
npm install
# æˆ–
yarn install
# æˆ–
pnpm install
```

### å¼€å‘æ¨¡å¼
```bash
npm run dev
# æˆ–
yarn dev
# æˆ–
pnpm dev
```

è®¿é—® [http://localhost:3000](http://localhost:3000) æŸ¥çœ‹åº”ç”¨ã€‚

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run build
npm start
```

## ğŸ”§ WebAssembly é…ç½®è¯´æ˜

æœ¬é¡¹ç›®ä½¿ç”¨ `ffmpeg.wasm` è¿›è¡Œè§†é¢‘å¤„ç†ï¼Œéœ€è¦å¯ç”¨ `SharedArrayBuffer` ä»¥æ”¯æŒå¤šçº¿ç¨‹å¤„ç†ã€‚é…ç½®å·²åœ¨ `next.config.js` ä¸­å®Œæˆï¼š

- **Cross-Origin-Opener-Policy**: `same-origin`
- **Cross-Origin-Embedder-Policy**: `require-corp`

è¿™äº›é…ç½®ç¡®ä¿äº† WebAssembly å¤šçº¿ç¨‹åŠŸèƒ½çš„æ­£å¸¸è¿è¡Œã€‚

### FFmpeg æ ¸å¿ƒæ–‡ä»¶é…ç½®

**é‡è¦ï¼š** ä»£ç é»˜è®¤ä½¿ç”¨æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼ˆ`/ffmpeg/ffmpeg-core.js`ï¼‰ï¼Œéœ€è¦å…ˆä¸‹è½½æ–‡ä»¶ã€‚

#### ä¸‹è½½ FFmpeg æ ¸å¿ƒæ–‡ä»¶

**Windowsï¼ˆPowerShellï¼‰ï¼š**
```powershell
.\download-ffmpeg.ps1
```

**Linux/Macï¼ˆBashï¼‰ï¼š**
```bash
chmod +x download-ffmpeg.sh
./download-ffmpeg.sh
```

**æ‰‹åŠ¨ä¸‹è½½ï¼š**
1. åˆ›å»ºç›®å½•ï¼š`mkdir -p public/ffmpeg`
2. ä¸‹è½½æ–‡ä»¶åˆ° `public/ffmpeg/` ç›®å½•ï¼š
   - https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.6/dist/esm/ffmpeg-core.js
   - https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.6/dist/esm/ffmpeg-core.wasm

#### ä½¿ç”¨ CDNï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦ä½¿ç”¨ CDNï¼Œåˆ›å»º `.env.local` æ–‡ä»¶ï¼š
```
NEXT_PUBLIC_FFMPEG_CORE_URL=https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.6/dist/esm/ffmpeg-core.js
NEXT_PUBLIC_FFMPEG_WASM_URL=https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.6/dist/esm/ffmpeg-core.wasm
```

**æ³¨æ„ï¼š** æ¨èä½¿ç”¨æœ¬åœ°æ–‡ä»¶ï¼Œæ›´ç¨³å®šå¯é ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
mediacc/
â”œâ”€â”€ .cursor/              # Cursor IDE è§„åˆ™é…ç½®
â”‚   â””â”€â”€ rules/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/              # Next.js App Router é¡µé¢
â”‚   â”‚   â”œâ”€â”€ layout.tsx    # æ ¹å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ page.tsx      # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ upload/       # ä¸Šä¼ é¡µé¢
â”‚   â”‚   â”œâ”€â”€ settings/     # è®¾ç½®é¡µé¢
â”‚   â”‚   â”œâ”€â”€ progress/     # è¿›åº¦é¡µé¢
â”‚   â”‚   â”œâ”€â”€ result/       # ç»“æœé¡µé¢
â”‚   â”‚   â”œâ”€â”€ error.tsx     # é”™è¯¯è¾¹ç•Œ
â”‚   â”‚   â”œâ”€â”€ not-found.tsx # 404 é¡µé¢
â”‚   â”‚   â””â”€â”€ globals.css   # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ components/       # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ FileUploader.tsx
â”‚   â”‚   â”œâ”€â”€ FilePreviewList.tsx
â”‚   â”‚   â”œâ”€â”€ ConversionSettings.tsx
â”‚   â”‚   â””â”€â”€ DownloadCard.tsx
â”‚   â”œâ”€â”€ lib/              # å·¥å…·å‡½æ•°å’Œæ ¸å¿ƒé€»è¾‘
â”‚   â”‚   â”œâ”€â”€ utils.ts      # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ ffmpeg-direct.ts  # FFmpeg ç›´æ¥åŠ è½½å™¨
â”‚   â”‚   â”œâ”€â”€ ffmpeg-iframe-manager.ts  # FFmpeg iframe ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ video-processor.ts  # è§†é¢‘å¤„ç†
â”‚   â”‚   â””â”€â”€ image-processor.ts  # å›¾ç‰‡å¤„ç†
â”‚   â””â”€â”€ store/            # Zustand çŠ¶æ€ç®¡ç†
â”‚       â””â”€â”€ index.ts
â”œâ”€â”€ next.config.js        # Next.js é…ç½®
â”œâ”€â”€ tailwind.config.ts    # Tailwind CSS é…ç½®
â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â””â”€â”€ package.json          # é¡¹ç›®ä¾èµ–
```

## ğŸ”’ éšç§ä¸å®‰å…¨

- âœ… **å®Œå…¨æœ¬åœ°å¤„ç†**: æ‰€æœ‰æ–‡ä»¶å¤„ç†åœ¨æµè§ˆå™¨ä¸­å®Œæˆ
- âœ… **æ— æ•°æ®ä¸Šä¼ **: ä¸ä¼šå°†ä»»ä½•æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨
- âœ… **æ— ç”¨æˆ·è¿½è¸ª**: ä¸éœ€è¦ç™»å½•ï¼Œä¸æ”¶é›†ç”¨æˆ·ä¿¡æ¯
- âœ… **å¼€æºé€æ˜**: ä»£ç å®Œå…¨å¯è§ï¼Œå¯è‡ªè¡Œå®¡æŸ¥

## ğŸ“ å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼
- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- æ‰€æœ‰ç»„ä»¶å¿…é¡»å®šä¹‰æ¸…æ™°çš„ Props ç±»å‹
- ä½¿ç”¨ Function Component ç¼–å†™ç»„ä»¶
- æ³¨é‡Šä½¿ç”¨ä¸­æ–‡æˆ–è‹±æ–‡ï¼Œä¿æŒç®€æ´æ¸…æ™°

### é”™è¯¯å¤„ç†
- æ‰€æœ‰å¼‚å¸¸å¿…é¡»åœ¨ UI ä¸Šæ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„æç¤º
- ä½¿ç”¨ Error Boundary æ•è·ç»„ä»¶é”™è¯¯
- åª’ä½“å¤„ç†é”™è¯¯éœ€è¦è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯æç¤º

### æ€§èƒ½ä¼˜åŒ–
- åŠæ—¶é‡Šæ”¾ `URL.createObjectURL` åˆ›å»ºçš„å¯¹è±¡
- æ‰¹é‡å¤„ç†æ—¶ä½¿ç”¨é˜Ÿåˆ—æœºåˆ¶ï¼Œé¿å…åŒæ—¶å¯åŠ¨å¤šä¸ª WASM å®ä¾‹
- ç»„ä»¶å¸è½½æ—¶æ¸…ç† FFmpeg å®ä¾‹ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼

## ğŸš€ åŠŸèƒ½å¼€å‘è·¯çº¿

- [x] é¡¹ç›®åˆå§‹åŒ–å’ŒåŸºç¡€é…ç½®
- [ ] æ–‡ä»¶ä¸Šä¼ ç»„ä»¶å®ç°
- [ ] å›¾ç‰‡å¤„ç†åŠŸèƒ½å®ç°
- [ ] è§†é¢‘å¤„ç†åŠŸèƒ½å®ç°
- [ ] æ‰¹é‡å¤„ç†é˜Ÿåˆ—æœºåˆ¶
- [ ] PWA ç¦»çº¿æ”¯æŒ
- [ ] ç”¨æˆ·ç•Œé¢ä¼˜åŒ–

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**æ³¨æ„**: æœ¬é¡¹ç›®ä»åœ¨å¼€å‘ä¸­ï¼Œéƒ¨åˆ†åŠŸèƒ½å°šæœªå®ç°ã€‚å½“å‰ç‰ˆæœ¬ä»…åŒ…å«åŸºç¡€é¡¹ç›®ç»“æ„å’Œé…ç½®ã€‚

